---
title: "Leavelt ä¸»é¢˜ä¼˜åŒ–"
date: 2018-11-16T19:57:09+08:00
draft: false
tags: ["Hugo"]
categories: ["æŠ˜è…¾åšå®¢çš„äºŒä¸‰äº‹"]
---

ç›®å‰æœ¬åšå®¢ä½¿ç”¨çš„ Hugo ä¸»é¢˜æ˜¯ï¼š[Leavelt](https://github.com/liuzc/LeaveIt)

æ­£å¦‚ä½ è¯´çœ‹åˆ°çš„é‚£æ ·ï¼Œæ˜¯ä¸€æ¬¾ç®€çº¦å¤§æ°”çš„çš„ä¸»é¢˜ã€‚ä½†å†ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æˆ‘ä¹Ÿå‘ç°äº†ä¸€äº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹

<!-- more -->

## æ·»åŠ è°ˆç¬‘é£ç”ŸåŒº

Leavelt é»˜è®¤æ²¡æœ‰è¯„è®ºç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ç‚¹ç®€å•çš„ä¿®æ”¹æ·»åŠ  Gitalk è¯„è®ºç³»ç»Ÿ

### å…³äº Gitalk

<img src="https://mogeko.github.io/blog-images/024/gitalk.png"  alt="Gitalk">

- å®˜æ–¹ç½‘å€ï¼š <https://github.com/gitalk/gitalk/>
- åœ¨çº¿ç¤ºä¾‹ï¼š <https://gitalk.github.io/>

Gitalk æ˜¯ä¸€ä¸ªåŸºäº GitHub Issue å’Œ Preact å¼€å‘çš„è¯„è®ºæ’ä»¶ã€‚å®ƒæ”¯æŒå¤šç§è¯­è¨€ (åŒ…æ‹¬ enã€zh-CNã€zh-TWã€es-ESã€fr)ï¼Œå¹¶è‡ªåŠ¨åˆ¤æ–­å½“å‰è¯­è¨€ã€‚æœ€é‡è¦çš„æ˜¯ Gitalk ä½¿ç”¨çš„æ˜¯ GitHub Issue çš„ apiï¼Œä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹å¹³å°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ Github ä¸å€’é—­ï¼Œä½ çš„è¯„è®ºç³»ç»Ÿå°±ä¸ä¼šè¢«å…³é—­ã€‚

### åˆ›å»º Github Application

é¦–å…ˆè¦å» GitHub ä¸Šåˆ›å»ºä¸€ä¸ª [Github Application](https://github.com/settings/applications/new)

<img alt="Github Application" src="https://mogeko.github.io/blog-images/024/get_Github_Application.png">

ç‚¹å‡»åˆ›å»º

è®°ä¸‹ `Client ID` å’Œ `Client Secret`ï¼Œä»¥åè¦ç”¨

<img alt="Client ID & Client Secret" src="https://mogeko.github.io/blog-images/024/get_id&secret.png">


### æ·»åŠ  gitalk.html æ¨¡æ¿

æ¥ä¸‹æ¥ä¸ºä¸»é¢˜æ·»åŠ  `gitalk.html` æ¨¡æ¿ã€‚

åœ¨ä¸»é¢˜çš„ `layouts/partials` æ–‡ä»¶å¤¹ä¸­åˆ›å»º `gitalk.html` æ–‡ä»¶ï¼Œå†™ä¸‹å¦‚ä¸‹ä»£ç 

```html
{{ if .Site.Params.enableGitalk }}
<div id="gitalk-container/" style="border:0" ></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css/" style="border:0" >
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js/" style="border:0" ></script>
<script>
  const gitalk = new Gitalk({
    clientID: '{{ .Site.Params.Gitalk.clientID }}',
    clientSecret: '{{ .Site.Params.Gitalk.clientSecret }}',
    repo: '{{ .Site.Params.Gitalk.repo }}',
    owner: '{{ .Site.Params.Gitalk.owner }}',
    admin: ['{{ .Site.Params.Gitalk.owner }}'],
    id: location.pathname, // Ensure uniqueness and length less than 50
    distractionFreeMode: false // Facebook-like distraction free mode
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>
{{ end }}
```

ç„¶ååœ¨ `layouts/_default/single.html` ä¸­æ’å…¥` {{ partial "gitalk.html" . }}` 

<img alt="æ’å…¥ Gitalk æ¨¡æ¿" src="https://mogeko.github.io/blog-images/024/set_div.png" style="border:0" >

### é…ç½® config.toml

åœ¨ `config.toml` ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®

```toml
[params]
  enableGitalk = true

[params.gitalk] 
    clientID = "[Client ID]" # Your client ID
    clientSecret = "[Client Secret]" # Your client secret
    repo = "mogeko.github.io" # The repo to store comments
    owner = "Mogeko" # Your GitHub ID
    admin= "Mogeko" # Required. Github repository owner and collaborators. (Users who having write access to this repository)
    id= "location.pathname" # The unique id of the page.
    labels= "gitalk" # Github issue labels. If you used to use Gitment, you can change it
    perPage= 15 # Pagination size, with maximum 100.
    pagerDirection= "last" # Comment sorting direction, available values are 'last' and 'first'.
    createIssueManually= false # If it is 'false', it is auto to make a Github issue when the administrators login.
    distractionFreeMode= false # Enable hot key (cmd|ctrl + enter) submit comment.
```

å°† `[Client ID]` æ›¿æ¢ä¸º Github Application çš„ Client ID

å°† `[Client Secret]` æ›¿æ¢ä¸º Github Application çš„ Client Secret

å°† `repo` è®¾ç½®ä¸ºä½ çš„åšå®¢çš„åœ°å€

å°† `owner` å’Œ `admin` è®¾ç½®ä¸ºä½ çš„ GitHub ID

æ›´å¤šé…ç½®è¯·å‚è€ƒï¼š<https://github.com/gitalk/gitalk>

è®¾ç½®å¥½åï¼Œå°†ç¼–è¯‘å¥½çš„ç½‘ç«™æ¨é€åˆ° GitHub ä¸Šï¼Œä¸å‡ºæ„å¤–çš„è¯åº”è¯¥å°±å¯ä»¥çœ‹è§è¯„è®ºæ¡†äº† (Gitalk åœ¨ `hugo server` ä¸­æ˜¯ä¸ä¼šå¯ç”¨çš„)## é…ç½® config.toml

åœ¨ `config.toml` ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®

```toml
[params]
  enableGitalk = true

[params.gitalk] 
    clientId = "[Client ID]" # Your client ID
    clientSecret = "[Client Secret]" # Your client secret
    repo = "mogeko.github.io" # The repo to store comments
    owner = "Mogeko" # Your GitHub ID
    admin= "Mogeko" # Required. Github repository owner and collaborators. (Users who having write access to this repository)
    id= "location.pathname" # The unique id of the page.
    labels= "gitalk" # Github issue labels. If you used to use Gitment, you can change it
    perPage= 15 # Pagination size, with maximum 100.
    pagerDirection= "last" # Comment sorting direction, available values are 'last' and 'first'.
    createIssueManually= false # If it is 'false', it is auto to make a Github issue when the administrators login.
    distractionFreeMode= false # Enable hot key (cmd|ctrl + enter) submit comment.
```

å°† `[Client ID]` æ›¿æ¢ä¸º Github Application çš„ Client ID

å°† `[Client Secret]` æ›¿æ¢ä¸º Github Application çš„ Client Secret

å°† `repo` è®¾ç½®ä¸ºä½ çš„åšå®¢çš„åœ°å€

å°† `owner` å’Œ `admin` è®¾ç½®ä¸ºä½ çš„ GitHub ID

æ›´å¤šé…ç½®è¯·å‚è€ƒï¼š<https://github.com/gitalk/gitalk>

è®¾ç½®å¥½åï¼Œå°†ç¼–è¯‘å¥½çš„ç½‘ç«™æ¨é€åˆ° GitHub ä¸Šï¼Œä¸å‡ºæ„å¤–çš„è¯åº”è¯¥å°±å¯ä»¥çœ‹è§è¯„è®ºæ¡†äº† (Gitalk åœ¨ `hugo server` ä¸­æ˜¯ä¸ä¼šå¯ç”¨çš„)

<img alt="Gitalk" src="https://mogeko.github.io/blog-images/024/done.png" style="border:0" >

**æ·»åŠ è°ˆç¬‘é£ç”ŸåŒºåè¿˜ä¸èƒ½ç«‹å³ä½¿ç”¨ï¼Œéœ€è¦ç”¨ä½ çš„ GitHub è´¦å·ç™»é™†å¹¶åˆå§‹åŒ–ã€‚æ¯ç¯‡åšå®¢éƒ½è¦**



## æ·»åŠ â€œéšè—æ–‡å­—â€(spoiler)

Steam å’Œå…¶ä»–ä¸€äº›æ”¯æŒ BBCode çš„è®ºå›éƒ½æœ‰ä¸€ç§åä¸ºâ€œéšè—æ–‡å­—â€(spoiler) çš„æ ‡ç­¾ï¼Œä½¿ç”¨è¿™ç§æ ‡ç­¾åï¼Œæ ‡ç­¾ä¸­çš„æ–‡å­—é»˜è®¤ä¼šéšè—èµ·æ¥ï¼Œå½“ä½ å°†é¼ æ ‡ç§»åŠ¨åˆ°æ–‡å­—ä¸Šæ—¶ï¼Œæ–‡å­—æ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚

å°±åƒè¿™æ ·ï¼š<span class="spoiler" >è¿™æ˜¯ä¸€æ®µéšè—æ–‡å­—</span>

å¾ˆæœ‰æ„æ€ğŸ˜

è™½ç„¶ Markdown å¹¶ä¸æ”¯æŒâ€œéšè—æ–‡å­—â€ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ Markdown ä¸­å†…åµŒ HTML å®ç°è¿™ä¸€åŠŸèƒ½

### å®‰è£… ruby-sass

**ç”±äº Leavelt ä½¿ç”¨äº† scssã€‚æ‰€ä»¥å¦‚æœæƒ³è¦æ·»åŠ è‡ªå®šä¹‰æ ·å¼çš„è¯éœ€è¦å…ˆå®‰è£… Sass (åŸºäº Rudy)**

æˆ‘ä½¿ç”¨æ˜¯ Ubuntuã€‚æ‰€ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œ `sudo apt install ruby-sass` å°±å¯ä»¥äº†ï¼Œè®¡ç®—æœºä¼šè‡ªåŠ¨ä¸ºæˆ‘è§£å†³å¥½ä¾èµ–

Mac OS è‡ªå¸¦å¾—æœ‰ Rubyï¼Œå› æ­¤å¯ä»¥é€šè¿‡ `gem`å®‰è£…

Windows éœ€è¦ [ä¸‹è½½ Ruby](http://rubyinstaller.org/downloads) çš„å®‰è£…åŒ…å®‰è£…

å…·ä½“å¯ä»¥å‚è€ƒ -> [å®‰è£… Sass | Sass ä¸­æ–‡ç½‘](https://www.sass.hk/install/)

### æ·»åŠ è‡ªå®šä¹‰æ ·å¼

åœ¨ `assets/css/_custom.scss` æ–‡ä»¶ä¸­æ·»åŠ  

```scss
.spoiler { 
  color: black; 
  background-color:black;
}
.spoiler:hover{
  color: white;
}
```

ç„¶ååœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ

```bash
sass --style compressed [Leacelt ç›®å½•]/css/main.scss:[Leacelt ç›®å½•]/resources/_gen/assets/scss/css/main.scss_b95b077eb505d5c0aff8055eaced30ad.content
```

æ³¨æ„æ›¿æ¢ `[Leacelt ç›®å½•]`

ç„¶åå†åœ¨ Markdown æ–‡ä»¶ä¸­ç”¨ class ä¸º `spoiler` çš„ HTML æ ‡ç­¾å°†æƒ³è¦â€œéšè—â€çš„æ–‡å­—æ ‡è®°å‡ºæ¥å°±å¯ä»¥äº†ï¼Œä¾‹å¦‚

```html
<span class="spoiler" >éšè—æ–‡å­—</span>
```

<span class="spoiler" >éšè—æ–‡å­—</span>

## æ”¾å¤§å›¾ç‰‡

é»˜è®¤çš„å›¾ç‰‡å¤§å°æœ‰ç‚¹å°ï¼Œä½œè€…çš„ç›®çš„åº”è¯¥æ˜¯æƒ³è®©å¤§å®¶å¤šä½¿ç”¨ä¸€ä¸‹ **lightGallery å›¾ç‰‡ç›¸å†Œ**ï¼›ä¸è¿‡å›¾ç‰‡å°äº†ï¼Œæœ‰æ—¶å€™æ–‡å­—çœ‹ä¸æ¸…æ¥š

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ `assets/css/_custom.scss` æ–‡ä»¶æŠŠå›¾ç‰‡å¼„å¤§ä¸€äº› (è™½ç„¶ä¹Ÿå¤§ä¸äº†å¤šå°‘)

åœ¨ `assets/css/_custom.scss` ä¸­æ·»åŠ 

```scss
.post-warp .post-content img {
  max-width: 100%;
}
```

ç„¶åä¸ä¸Šé¢ä¸€æ ·çš„ç¼–è¯‘ï¼Œè¿è¡Œ

```bash
sass --style compressed [Leacelt ç›®å½•]/css/main.scss:[Leacelt ç›®å½•]/resources/_gen/assets/scss/css/main.scss_b95b077eb505d5c0aff8055eaced30ad.content
```

<br>
<br>

è¿˜æœ‰ä¸€ä¸ªåŠæ³•å°±æ˜¯ä½¿ç”¨ **HTML æ ‡ç­¾**ä»£æ›¿ **Markdown è¯­æ³•**ï¼Œå³ç”¨ `<img src="">` æ ‡ç­¾ä»£æ›¿ `![]()`

ä¸è¿‡è¿™æ ·å°±æ²¡æ³•ä½¿ç”¨ **lightGallery å›¾ç‰‡ç›¸å†Œ** äº†

## æ·»åŠ å­—æ•°ç»Ÿè®¡

æ‰“å¼€æ–‡ä»¶ `layouts/_default/single.html`ï¼Œåœ¨ `22` è¡Œåæ’å…¥ä¸€è¡Œï¼Œæ·»åŠ ä»¥ä¸‹ **DOM**ï¼š

```html
<span class="post-word-count">, {{ .WordCount }} words</span>
```

<img alt="Gitalk" src="https://mogeko.github.io/blog-images/025/add_word-count.png" style="border:0" >

æ•ˆæœï¼š

<img alt="å­—æ•°ç»Ÿè®¡" src="https://mogeko.github.io/blog-images/033/fix_bug.png" >

å…³äºæ·»åŠ ã€Œå­—æ•°ç»Ÿè®¡ã€çš„è¯¦æƒ…ï¼š[ä¸º Hugo åšå®¢æ·»åŠ å­—æ•°ç»Ÿè®¡](https://mogeko.github.io/2018/033/)

## ç›¸å…³æ–‡ç« 

- [**ä½¿ç”¨ Hugo + GitHub Pages æ­å»ºä¸ªäººåšå®¢**](http://localhost:1313/2018/018/)
- [**ä¸º Hugo æ·»åŠ è°ˆç¬‘é£ç”ŸåŒº (Gitalk)**](https://mogeko.github.io/2018/024/)
- [**ä½¿ç”¨ Travis CI è‡ªåŠ¨éƒ¨ç½² Hugo åšå®¢**](https://mogeko.github.io/2018/028/)
- [**ä¸º Hugo åšå®¢æ·»åŠ å­—æ•°ç»Ÿè®¡**](https://mogeko.github.io/2018/033/)
- [**ä¸ºåšå®¢æ·»åŠ ç‹¬ç«‹åŸŸå**](https://mogeko.github.io/2019/048/)
- [**ä¸ºåšå®¢æ·»åŠ å…è´¹çš„ CDN (Cloudflare)**](https://mogeko.github.io/2019/056/)

<br>

<center>  Â·EndÂ·  </center>